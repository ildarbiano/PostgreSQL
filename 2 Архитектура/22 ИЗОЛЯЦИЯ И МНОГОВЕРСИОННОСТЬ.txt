
=============== Изоляция и многоверсионность PosgreSQL=============================
	!? 		:множественно-параллельная нагрузка. Как обеспечить:
Concurrency		-параллельную работу множества сессий, которые модифицируют данные так, чтобы они 
Consistency		-модификация сессий так, чтобы они не мешали друг другуни, как с точки зрения чтения, так ни с точки зрения записи и,  обеспечивали целостность данных;
Durability		-обеспечивали надежность данных.
	Ответ:		:OLTP-Online Transaction Processing

=============== ACID - принципы ==================================
четыре принципа, обеспечивающих надёжность транзакций в PostgreSQL. Эти принципы: 
Atomicity	Атомарность. Гарантирует, что транзакция исполняется целиком или полностью отменяется, исключая частичное применение изменений. Это исключает ситуации, когда часть операций в рамках одной транзакции успешно завершена, а другая — нет, что могло бы привести к неконсистентным данным;
Consistency 	Согласованность. Гарантирует, что данные в базе переходят только из одного согласованного состояния в другое. Все ограничения целостности должны быть соблюдены;
Isolation	Изоляция. Предотвращает конфликты между параллельными транзакциями/Transaction. Изменения, которые происходят в ходе выполнения одной транзакции, не видны другим транзакциям, пока транзакция не завершена;
Durability 	Долговечность. Гарантирует, что после завершения транзакции/Transaction её изменения сохраняются, даже если система выходит из строя. Обеспечивается механизмом WAL.
ACID-правила/принципы обеспечивают:
		-предотвращение частичного выполнения транзакций, что исключает неконсистентные состояния базы, Consistency;
		-защиту от конфликтов между параллельными операциями, Atomicity и Isolation;
		-гарантию долговечности данных, даже при сбоях оборудования или программного обеспечения, Durability.
Transaction	-либо выполняются все операции, либо ни какая, если произошёл сбой.


=============== Надёжность ==================================
--------------- APIES:
Algorithms for Recovery and Isolation Exploiting Semantics в PostgreSQL
алгоритм управления восстановлением и изоляцией Transaction в базах данных:
logging		-
undo		-способ отменить результат транзакции. Цель алгоритма — восстановить целостность данных после сбоев и конфликтов транзакций. Записи в журнале транзакций содержат информацию для отмены изменений, если транзакция откатывается, и повторного применения изменений при восстановлении. 
redo		-механизм проигрывания транзакций после сбоя. Он является частью системы Write-Ahead Logging (WAL), которая обеспечивает целостность данных и восстановление после сбоев. Цель: записи в логе redo записывают изменения, которые нужно повторно применить (или «проиграть») к базе данных во время восстановления после сбоя. Это гарантирует, что если система выйдет из строя после фиксации транзакции, но до того, как изменения полностью записаны на диск, записи в логе redo обеспечат, что изменения будут применены к файлам базы данных при перезапуске PostgreSQL.
checkpoints	-


--------------- MVCC:
Multiversion Concurrency Control в PostgreSQL
механизм многоверсионного управления параллелизмом. Он позволяет нескольким транзакциям одновременно читать и изменять данные, не мешая друг другу:
Copy-on-Write		-COW в PostgreSQL — это механизм, который позволяет копировать данные при записи в файловых системах, работающих по принципу COW («копирование при записи»). При изменении данных INSERT, UPDATE - создаётся новая запись, а старая помечается, как "грязная запись";
User 			-use snapshot DataBase. Каждый пользователь условно получает свою версию (образ) БД, где производит изменения, которые не видны другим операциям и процессам.;
Changes			-видны другим пользователям только после фиксации Transaction.

XMIN входит в состав tuple	—Идентификатор транзакции которая создала данную версию записи. Отдельная записи в памяти, включающая не только данные колонок, но и служебную информацию, необходимую для работы многоверсионности (MVCC);

XMAX				—Идентификатор транзакции, которая удалила (или обновила) версию строки. Служебное поле в PostgreSQL, входит в механизм многоверсионности (MVCC), благодаря которому читающие транзакции не блокируют пишущие, и наоборот. Каждая транзакция работает со своей версией данных, а доступ регулируется правилами видимости;

CMIN				-Порядковый номер команды внутри транзакции, добавившей строку. Это системный столбец, неявно определённый системой, и его имена нельзя использовать в качестве имён пользовательских столбцов. Cmin представляет номер для вставки, но для экономии места в заголовке строки это на самом деле одно поле, а не два разных. Принцип работы: Столбец cmin используется в механизме MVCC PostgreSQL для управления параллельными транзакциями. MVCC подразумевает создание отпечатка базы данных — snapshot. 

CMAX				—Порядковый номер команды в транзакции, удалившей запись. Служебное поле в PostgreSQL, отображается в псевдостолбцах cmin и cmax в заголовке версии строки. Для экономии места в заголовке строки это на самом деле одно поле, а не два разных. Поле используется в механизме MVCC, который обеспечивает согласованность данных при работе с конкурентными транзакциями. 


================ УРОВНИ ИЗОЛЯЦИИ ТРАНЗАКЦИЙ =============================================
Стандарт SQL определяет четыре уровня изоляции транзакций: 
READ UNCOMMITTED 			(«Чтение незафиксированных данных») 		— самый низкий уровень, позволяет транзакции видеть изменения данных, произведённые другими незавершёнными транзакциями. Может приводить к проблеме «грязного чтения» dirty read.
READ COMMITTED 				(«Чтение зафиксированных данных») 		— гарантирует, что транзакция видит только подтверждённые изменения других транзакций. Предотвращает «грязное чтение», но возможны «неповторяемое чтение» и «фантомные чтения». Уровень по-умолчанию в PostgreSQL.
REPEATABLE READ 			(«Повторяемое чтение») 				— гарантирует, что если транзакция дважды прочитает одни и те же данные, она получит одинаковые результаты. Предотвращает «грязное чтение» и «неповторяемое чтение», но возможны «фантомные чтения» phantom read.
SERIALIZABLE 				(«Сериализуемость»)				 — наивысший уровень изоляции, гарантирует, что результат параллельного выполнения транзакций эквивалентен некоторому последовательному их выполнению. Предотвращает все известные аномалии параллельного доступа.