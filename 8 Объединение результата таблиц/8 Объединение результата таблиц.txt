=========================== JOIN:
Это объединение 2-х и более таблиц определенным способом, по определенным правилам.
Один JOIN					-- две таблицы
Два JOIN					-- три таблицы
--------------------------- 7 ВИДОВ:
----------------см. 81 SQL_JOINS.png
SELECT <поля>
FROM <таблица 1>
[INNER]
{{LEFT | RIGHT | FULL } [OUTER]} JOIN <таблица 2>
[ON <предикат>]							<предикат> обязательный.
[WHERE <предикат>]						<предикат> для итоговой выборки после соединения.
Несмотря на многообразие видов джойнов, в 99,99% используются два:
		LEFT JOIN
		INNER JOIN
Статья от DBA архитектора про соединения, есть анимация, для наглядности процесса: https://towardsdatascience.com/can-we-stop-with-the-sql-joins-venn-diagrams-insanity-16791d9250c3

--------------------------- Left Join:
Если ключи в двух таблицах совпадают, то будет возвращена строка, содержащая колонки из обеих таблиц;
Если для строки из левой таблицы не будет найдено строк с тем же ключом в правой таблице, то вернётся строка из левой таблицы, но в том числе с колонками правой таблицы, в которых будет стоять null:
SELECT *
FROM <таблица_1> AS a  
LEFT JOIN <таблица_2> AS b
ON a.Key = b.Key
-------------------------
<таблица_1> > <таблица_2>			-- то есть, ВРЕМЕННАЯ РАБОЧАЯ ТАБЛИЦА "Working Set" будет иметь все строки <таблица_1>, но в строках с полями отсутствующими в <таблица_2> будут проставлены значения NULL. Содержит все строки и <таблица_1> AS a LEFT с заполнением NULL, если нет совпадения в <таблица_2>.
-------------------------
--------------------------- Left Outer Join:
--------------------------- Full Outer Join:
--------------------------- Inner Join или Join:
— это оператор для ВНУТРЕННЕГО объединения таблиц. Он возвращает строки, когда есть совпадение в обеих таблицах. 
Для каждой строки в одной таблице INNER JOIN сравнивает значение в столбце с значением в соответствующем столбце каждой строки в другой таблице. Если эти значения равны, оператор создаёт новую строку, которая включает все столбцы из обеих таблиц, и добавляет её в результирующий набор. Если значения не равны, INNER JOIN игнорирует текущую пару и переходит к следующей строке, повторяя процесс сопоставления. 
SELECT select_list 				-- указывает столбцы из обеих таблиц.
FROM table1 					-- указывает основную таблицу.
INNER JOIN table2 				-- указывает вторую таблицу, с которой нужно выполнить объединение.
ON table1.column_name = table2.column_name. 	-- указывает условие для соединения. Указывает, по какому столбцу в каждой таблице должны быть совпадающие значения.
*-Слово INNER может быть пропущено, так как оно является DEFAULT для команды JOIN, но рекомендуется его прописывать во избежание путаницы. 
*-Важно: PostgreSQL проверяет только корректность написания условия (синтаксис), но не его логику. Поэтому некорректные условия — полностью ответственность разработчика (например, попытка JOIN двух непересекающихся выборок). 
SELECT *
FROM <таблица_1> AS a				-- указывает основную таблицу.
(INNER) JOIN <таблица_2> AS b			-- если написать JOIN, то будет считаться INNER JOIN. Слово INNER может быть пропущено, так как оно является DEFAULT для команды JOIN, но рекомендуется его прописывать во избежание путаницы. 
ON a.Key = b.Key				-- указывает условие для соединения. Указывает, по какому столбцу в каждой таблице должны быть совпадающие значения.
-------------------------
<таблица_1> = <таблица_2>			то есть, ВРЕМЕННАЯ РАБОЧАЯ ТАБЛИЦА "Working Set" будет иметь только строки найденные, как в <таблица_1>, так и в <таблица_2>. Содержит только совпадающие строки.
-------------------------
Postgres встанет на первую строчку <таблица_1> и, при совпадении a.Key = b.Key в <таблица_2> создаётся ВРЕМЕННУЮ РАБОЧУЮ ТАБЛИЦУ "Working Set", в которую добавляется строка из <таблица_1> и <таблица_2>, в одну строку, - набор значений из <таблица_1> и <таблица_2>, где будут все поля <таблица_1> и <таблица_2>. Итогом из результирующего набора во ВРЕМЕННОЙ РАБОЧЕЙ ТАБЛИЦЕ "Working Set" сделаем SELECT.
--------------------------- Right Join:
--------------------------- Right Outer Join:
--------------------------- Full Outer Join:

=========================== МНОЖЕСТВА ИЛИ СОЧЕТАНИЯ ЗАПРОСОВ:
ОБЪЕДИНЕНИЕ МНОЖЕСТВ - это результат СОЧЕТАНИЕ двух и более ЗАПРОСОВ. Можно обработать, используя операции над множествами: объединение, пересечение и вычитание. СОЧЕТАНИЕ нескольких SELECT, 
Эти операции записываются соответственно так:
запрос1 	UNION [ALL] 		запрос2		объединение
запрос1 	EXCEPT [ALL] 		запрос2		вычитание
запрос1 	INTERSECT [ALL] 	запрос2		пересечение
*-Здесь, запрос1 и запрос2 — это запросы, в которых могут использоваться все возможности, рассмотренные до этого (выборки нужных полей, условия, обьединения и т.д.)
-------------------------- оператор UNION:
Для <объединения> множеств (результатов двух или более операторов SELECT) используется оператор UNION. Он позволяет объединить строки из всех множеств, но по умолчанию удаляет повторяющиеся строки. Если необходимо сохранить все строки, включая дубликаты, используется оператор UNION ALL. 
Базовый синтаксис оператора UNION:
	SELECT select_list 				-- <target list>
	FROM A 						-- <table>
	UNION [all]					-- <Объединение> исключать дубликаты, без [all]. [ALL]=будут дубли.
	SELECT select_list 				-- <target list>
	FROM B; 					-- <table_2>
	Правила работы: 
	-Количество и порядок столбцов в списке SELECT обоих запросов должны быть одинаковыми.
	-Типы данных столбцов в списках SELECT запросов должны быть совместимыми.
Можно объединять результаты двух запросов (таблиц) и более, на выходе будут возвращены строки из всех множеств. 
-------------------------- оператор EXCEPT:
Для операции <исключения> множеств (вычитания) используется оператор EXCEPT. Он возвращает все строки, которые есть в результате первого запроса, но отсутствуют в результате второго. Исключение множество строк из "верхнего" множества, иногда это называют разницей двух запросов. Оператор полезен, когда нужно сравнить результаты двух или более запросов и найти различия, например позиции номенклатуры, которые не продаются, или наоборот получить список неликвидов. 
Синтаксис оператора EXCEPT:
	SELECT expression1, ... expression_n 		-- <target list> столбцы или вычисления, которые нужно сравнить между двумя запросами. Не обязательно должны быть одинаковыми полями в каждом запросе, но соответствующие столбцы должны быть совместимых типов данных.
	FROM tables [WHERE conditions] 			-- <table> WHERE conditions — опциональное условие, которое должно быть выполнено для выбора записей.
	EXCEPT 						-- <Исключение> исключать дубликаты, без [all]. [ALL]=будут дубли.
	SELECT expression1, ... expression_n 		-- <target list> столбцы или вычисления, которые нужно сравнить между двумя запросами. Не обязательно должны быть одинаковыми полями в каждом запросе, но соответствующие столбцы должны быть совместимых типов данных.
	FROM tables [WHERE conditions]. 		-- <table_2> WHERE conditions — опциональное условие, которое должно быть выполнено для выбора записей.
Можно исключить одно множество из другого. На выходе будут возвращены строки из "верхнего"/"первого запроса" множества, для которых не нашлось соответствия в другом множестве. 
*-Оператор EXCEPT чувствителен к регистру — строки с одинаковыми значениями, но разными случаями (например, «ABC» vs. «abc») считаются разными.
-------------------------- оператор INTERSECT:
Для операции <пересечения> множеств (объединения результатов двух запросов) используется оператор INTERSECT. Он возвращает общие данные из первого и второго запроса. 
Особенности:
	Если запись существует в обоих наборах данных, она будет включена в результаты INTERSECT.
	Если запись существует в одном наборе данных, а не в другом, она будет опущена в результатах INTERSECT.
	Если не указано ключевое слово ALL (по умолчанию подразумевается DISTINCT), то при выполнении операции автоматически устраняются дубликаты строк.
Синтаксис оператора INTERSECT:
	SELECT expression1, ... expression_n 		-- столбцы или вычисления, которые нужно получить
	FROM tables [WHERE conditions] 
	INTERSECT 					-- <пересечение>
	SELECT expression1, ... expression_n 		-- столбцы или вычисления, которые нужно получить
	FROM tables [WHERE conditions]. 		-- WHERE conditions — необязательный, это условия, которые должны быть соблюдены для выбора записей.
*-в обоих операторах SELECT должно быть одинаковое количество выражений, соответствующие выражения должны иметь одинаковый тип данных. 
	SELECT select_list 				-- <target list>
	FROM A 						-- <table>
	INTERSECT 					-- <пересечение>, исключать дубликаты, без [all]. [ALL]=будут дубли.
	SELECT select_list 				-- <target list>
	FROM B; 					-- <table_2>
Можно пересечь результаты двух и более запросов (таблиц), на выходе будут только те строки, которые полностью совпали. 
-------------------------- Оптимизация:
Некоторые рекомендации по оптимизации запросов с оператором UNION:
	-Указывать [ALL] везде, где возможно, — UNION ALL обычно работает быстрее, чем UNION. Можно исключать дубликаты (убрав ключевое слово ALL). [ALL] = будут дубли, но это "дешевле" для приложения, потому как удаление дубликатов требует ресурсы;
	-Явно обозначать, что выдаваться должны только неповторяющиеся строки, можно добавить слово DISTINCT.
	-При использовании в одном запросе SELECT нескольких операторов UNION они вычисляются слева направо, если иной порядок не определяется скобками.

